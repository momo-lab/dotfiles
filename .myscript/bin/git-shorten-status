#!/bin/bash

function show_git_status() {
  if [ "$1" != "" ]; then
    cd $1
  fi
  status=`
    git -c color.ui=always status -s;
    git -c color.ui=always stash list --oneline --decorate;
    git -c color.ui=always log --branches --not --remotes --oneline --graph --decorate
  `
  if [ "$status" != "" ]; then
    if [ "$1" != "" ]; then
      branch=`git symbolic-ref --short HEAD`
      echo -e "\e[92m$1\e[0m (\e[32m$branch\e[0m)"
    fi
    echo "$status"
  fi
}

if [ $# == 0 ]; then
  show_git_status `pwd`
  exit
fi

while [ $# -gt 0 ]; do
  show_git_status $1
  shift
done
